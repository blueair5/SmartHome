## 流程

### 客户端

1. 定时器，实时向服务器请求数据

   ```java
   TimerTask
   ```

2. 写客户端的 socket，将协议写成 String，通过字符流发送给服务器。（字节流有一个问题是如何终止阻塞？）

   ```xml
   <SensorAddress></SensorAddress>
   ```

### 服务器

1. 服务器应该进行多线程，响应多个客户端。

2. 服务器线程中读到客户端发来的数据，将 String 拼接成 xml 类型的，转换成document 对象。(是否可以直接传 document 过去？)

   ```java
   DocumentHelper.parseTest(content);
   ```

3. 遍历 document 对象，根据条件进行判断，写入相应的数据。然后将一个 xml 写成 String 类型，用字符流发回到客户端。

### 客户端

3. 接收服务器发回来的数据。
4. 进行数据处理
5. 将数据写入到一个文件中

## 结构

<img src="F:\\BigData_JiePu\\作业\\基于Java的联网环境监测数据中心\\Structure.png" alt="Structure" style="zoom: 80%;" />